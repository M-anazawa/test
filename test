1. 必要な権限

A. Redshiftスナップショットの操作に必要な権限
	1.	スナップショットの復元:
	•	redshift:RestoreFromClusterSnapshot

	2.	スナップショットの参照:
	•	redshift:DescribeClusterSnapshots
	•	redshift:DescribeClusters

B. KMSキーに関連する権限

移行元アカウントから共有されたスナップショットで使用されているKMSキーへのアクセス権が必要です。
	1.	KMSキーの復号:
	•	kms:Decrypt

	2.	KMSキーの参照:
	•	kms:DescribeKey

2. IAMポリシー例

以下は、移行先のAWSアカウントで暗号化されたスナップショットを復元するためのIAMポリシーの例です。

A. Redshiftスナップショットの復元用ポリシー
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Effect": "Allow",
            "Action": [
                "redshift:RestoreFromClusterSnapshot",
                "redshift:DescribeClusterSnapshots",
                "redshift:DescribeClusters"
            ],
            "Resource": "*"
        }
    ]
}

B. KMSキーのアクセス権付与用ポリシー

{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Effect": "Allow",
            "Action": [
                "kms:Decrypt",
                "kms:DescribeKey"
            ],
            "Resource": "arn:aws:kms:source-region:source-account-id:key/source-key-id"
        }
    ]
}

	•	source-region:
	•	移行元のKMSキーが存在するリージョン。
	•	source-account-id:
	•	移行元のAWSアカウントID。
	•	source-key-id:
	•	移行元でスナップショット暗号化に使用されたKMSキーのIDまたはARN。
